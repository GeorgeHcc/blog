(window.webpackJsonp=window.webpackJsonp||[]).push([[48],{378:function(s,t,a){"use strict";a.r(t);var e=a(4),n=Object(e.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/GeorgeHcc/GeorgeHcc@main/assets/blog/images.png",alt:""}})]),s._v(" "),t("p",[s._v("2023å¹´4æœˆ18æ—¥æ–°å‘å¸ƒçš„node.js "),t("Badge",{attrs:{text:"v20"}}),s._v("ç‰ˆæœ¬,æœ‰è®¸å¤šå€¼å¾—å…³æ³¨çš„ç‚¹ï¼Œå®˜æ–¹è®¡åˆ’å°†äº2023/10æœˆæ­£å¼æˆä¸ºé•¿æœŸç»´æŠ¤ç‰ˆæœ¬ï¼Œä¸€èµ·æ¥çœ‹çœ‹éƒ½æœ‰å“ªäº›æ–°ç‰¹æ€§ï¼\n")],1),s._v(" "),t("h2",{attrs:{id:"_1-æ–°å¢æƒé™æ¨¡å‹"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-æ–°å¢æƒé™æ¨¡å‹"}},[s._v("#")]),s._v(" 1.æ–°å¢æƒé™æ¨¡å‹")]),s._v(" "),t("p",[s._v("è¿™æ˜¯nodev20æ–°å¢çš„ç‰¹æ€§ï¼Œä¸çŸ¥é“æ˜¯ä¸æ˜¯"),t("s",[s._v("æŠ„")]),s._v("å€Ÿé‰´äº†denoğŸ˜‚\nNode.js æƒé™æ¨¡å‹æ˜¯ä¸€ç§å®éªŒæ€§æœºåˆ¶ï¼Œç”¨äºåœ¨æ‰§è¡ŒæœŸé—´é™åˆ¶å¯¹ç‰¹å®šèµ„æºçš„è®¿é—®ã€‚")]),s._v(" "),t("p",[s._v("åœ¨åŒ…å«æƒé™æ¨¡å‹çš„ç¬¬ä¸€ä¸ªç‰ˆæœ¬ä¸­ï¼ŒåŠŸèƒ½å…·æœ‰ä»¥ä¸‹åŠŸèƒ½ï¼š")]),s._v(" "),t("ul",[t("li",[s._v("é™åˆ¶å¯¹æ–‡ä»¶ç³»ç»Ÿçš„è®¿é—®ï¼ˆè¯»å’Œå†™ï¼‰\n"),t("ul",[t("li",[s._v("ä½¿ç”¨"),t("code",[s._v("--allow-fs-read")]),s._v("å’Œ"),t("code",[s._v("--allow-fs-write")])])])]),s._v(" "),t("li",[s._v("é™åˆ¶è®¿é—®"),t("code",[s._v("child_process")]),s._v(" "),t("ul",[t("li",[s._v("ä½¿ç”¨"),t("code",[s._v("--allow-child-process")])])])]),s._v(" "),t("li",[s._v("é™åˆ¶è®¿é—®"),t("code",[s._v("worker_threads")]),s._v(" "),t("ul",[t("li",[s._v("ä½¿ç”¨"),t("code",[s._v("--allow-worker")])])])]),s._v(" "),t("li",[s._v("é™åˆ¶å¯¹æœ¬æœºæ’ä»¶çš„è®¿é—®ï¼ˆä¸æ ‡å¿—ç›¸åŒ"),t("code",[s._v("--no-addons")]),s._v("ï¼‰\n"),t("ul",[t("li",[s._v("å¯ç”¨æƒé™ç”±æ ‡å¿—è®°å½•"),t("code",[s._v("--experimental-permission")]),s._v(" ã€‚")])])])]),s._v(" "),t("p",[s._v("å½“ä½¿ç”¨ å¯åŠ¨ "),t("code",[s._v("Node.js")]),s._v(" æ—¶"),t("code",[s._v("--experimental-permission")]),s._v("ï¼Œè®¿é—®æ–‡ä»¶ç³»ç»Ÿã€ç”Ÿæˆè¿›ç¨‹å’Œä½¿ç”¨çš„èƒ½åŠ›"),t("code",[s._v("node:worker_threads")]),s._v("å°†å—åˆ°é™åˆ¶ã€‚")]),s._v(" "),t("p",[s._v("é€šè¿‡å¼•å…¥"),t("code",[s._v("--allow-fs-readå’Œ--allow-fs-write")]),s._v("æ ‡å¿—ï¼Œä½¿ç”¨ Node.js çš„å¼€å‘äººå‘˜ç°åœ¨å¯ä»¥æ›´å¥½åœ°æ§åˆ¶æ–‡ä»¶ç³»ç»Ÿè®¿é—®ã€‚è¿™äº›å®éªŒæ€§åŠŸèƒ½å…è®¸æ›´ç²¾ç»†åœ°æ§åˆ¶ Node.js è¿›ç¨‹å¯ä»¥è®¿é—®æ–‡ä»¶ç³»ç»Ÿçš„å“ªäº›éƒ¨åˆ†ã€‚")]),s._v(" "),t("p",[s._v("è¦å¯ç”¨è¿™äº›æ ‡å¿—ï¼Œå¼€å‘äººå‘˜å¯ä»¥ä½¿ç”¨è¯¥"),t("code",[s._v("--experimental-permission")]),s._v("æ ‡å¿—ä»¥åŠæ‰€éœ€çš„æƒé™ã€‚ä¾‹å¦‚ï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤å…è®¸å¯¹æ•´ä¸ªæ–‡ä»¶ç³»ç»Ÿè¿›è¡Œè¯»å†™è®¿é—®ï¼š")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("node")]),s._v(" --experimental-permission --allow-fs-read"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("* --allow-fs-write"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("* index.js\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("å¼€å‘äººå‘˜è¿˜å¯ä»¥é€šè¿‡å‘æ ‡å¿—ä¼ é€’é€—å·åˆ†éš”å€¼æ¥æŒ‡å®šæ–‡ä»¶ç³»ç»Ÿè®¿é—®çš„ç‰¹å®šè·¯å¾„ã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹å‘½ä»¤å…è®¸å¯¹/tmp/æ–‡ä»¶å¤¹è¿›è¡Œå†™è®¿é—®ï¼š")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("node")]),s._v(" --experimental-permission --allow-fs-write"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/tmp/ --allow-fs-read"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/home/index.js index.js\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("é€šé…ç¬¦æ¨¡å¼è¿˜å¯ç”¨äºå…è®¸ä¸€æ¬¡è®¿é—®å¤šä¸ªæ–‡ä»¶æˆ–æ–‡ä»¶å¤¹ã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹å‘½ä»¤å…è®¸å¯¹/home/ç›®å½•ä¸­ä»¥ å¼€å¤´çš„æ‰€æœ‰æ–‡ä»¶å’Œæ–‡ä»¶å¤¹è¿›è¡Œè¯»å–è®¿é—®testï¼š")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("node")]),s._v(" --experimental-permission --allow-fs-read"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/home/test* index.js\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("permissionå½“å¯ç”¨æƒé™æ¨¡å‹æ—¶ï¼Œå¯ä»¥ä½¿ç”¨å¯¹è±¡çš„æ–°å±æ€§processåœ¨è¿è¡Œæ—¶æ£€æŸ¥æ˜¯å¦å·²æˆäºˆæŸä¸ªæƒé™ã€‚")]),s._v(" "),t("div",{staticClass:"language-JavaScript line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[s._v("process"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("permission"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("has")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'fs.write'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// true")]),s._v("\nprocess"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("permission"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("has")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'fs.write'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/home/nodejs/protected-folder'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// true")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h2",{attrs:{id:"_2-esm-loader-hooksæ¥è¿‘ç¨³å®š"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-esm-loader-hooksæ¥è¿‘ç¨³å®š"}},[s._v("#")]),s._v(" 2.ESM loader hooksæ¥è¿‘ç¨³å®š")]),s._v(" "),t("p",[s._v("é€šè¿‡loader( ) æä¾›çš„è‡ªå®šä¹‰ ESMç”Ÿå‘½å‘¨æœŸhooks"),t("code",[s._v("--experimental-loader=./foo.mjs")]),s._v("ç°åœ¨åœ¨ä¸ä¸»çº¿ç¨‹éš”ç¦»çš„ä¸“ç”¨çº¿ç¨‹ä¸­è¿è¡Œã€‚è¿™ä¸ºåŠ è½½ç¨‹åºæä¾›äº†å•ç‹¬çš„èŒƒå›´ï¼Œå¹¶ç¡®ä¿åŠ è½½ç¨‹åºå’Œåº”ç”¨ç¨‹åºä»£ç ä¹‹é—´ä¸ä¼šäº¤å‰æ±¡æŸ“ã€‚")]),s._v(" "),t("p",[s._v("ä¸æµè§ˆå™¨è¡Œä¸ºä¿æŒä¸€è‡´ï¼Œ"),t("code",[s._v("import.meta.resolve()")]),s._v("ç°åœ¨åŒæ­¥è¿”å›ï¼›è¯·æ³¨æ„ï¼Œresolveå¦‚æœåŠ è½½ç¨‹åºä½œè€…æ„¿æ„ï¼Œç”¨æˆ·åŠ è½½ç¨‹åºä¸­çš„æŒ‚é’©å¯ä»¥ä¿æŒå¼‚æ­¥ï¼Œå¹¶ä¸”"),t("code",[s._v("import.meta.resolve")]),s._v("ä»ç„¶ä¼šåœ¨åº”ç”¨ç¨‹åºä»£ç ä¸­åŒæ­¥è¿”å›ã€‚")]),s._v(" "),t("blockquote",[t("p",[s._v("è¿™äº›æ›´æ”¹æ˜¯å°† ESM åŠ è½½ç¨‹åºæ ‡è®°ä¸ºç¨³å®šä¹‹å‰çš„æœ€åä¸€ä¸ªæœªå®Œæˆçš„é¡¹ç›®ã€‚ä¸€æ—¦ç¤¾åŒºæ²¡æœ‰æŠ¥å‘Šé‡å¤§é”™è¯¯ä¸€æ®µæ—¶é—´åï¼Œæˆ‘ä»¬æ‰“ç®—å°† loader æ ‡å¿—ä»¥åŠimport.meta.resolveå’Œ hook æ ‡è®°resolveä¸ºloadç¨³å®šã€‚è¿™å°†ä½¿ ESM å¾—åˆ°æ›´å¹¿æ³›çš„é‡‡ç”¨ï¼Œå› ä¸ºä»ªå™¨ä¾›åº”å•†ç­‰é‡è¦æ”¯æŒè€…å°†æ‹¥æœ‰ç¨³å®šçš„ API æ¥æ„å»ºåˆ†æå’ŒæŠ¥å‘Šåº“ã€‚")])]),s._v(" "),t("blockquote",[t("p",[s._v("ç”± Anna Henningsenã€Antoine du Hamelã€Geoffrey Boothã€Guy Bedfordã€Jacob Smith å’Œ MichaÃ«l Zasso åœ¨#44710ä¸­è´¡çŒ®ã€‚")])]),s._v(" "),t("blockquote",[t("p",[s._v("V8 11.3\nä¸å¾€å¸¸ä¸€æ ·ï¼ŒNode.js ä¸­åŒ…å«äº†æ–°ç‰ˆæœ¬çš„ V8 å¼•æ“ï¼ˆæ›´æ–°è‡³ç‰ˆæœ¬ 11.3ï¼Œå®ƒæ˜¯ Chromium 113 çš„ä¸€éƒ¨åˆ†ï¼‰ï¼Œå¸¦æ¥äº†æ”¹è¿›çš„æ€§èƒ½å’Œæ–°çš„è¯­è¨€åŠŸèƒ½ï¼ŒåŒ…æ‹¬ï¼š")])]),s._v(" "),t("blockquote",[t("p",[s._v("String.prototype.isWellFormed å’Œ toWellFormed\né€šè¿‡å¤åˆ¶æ›´æ”¹ Array å’Œ TypedArray çš„æ–¹æ³•\nå¯è°ƒæ•´å¤§å°çš„ ArrayBuffer å’Œå¯å¢é•¿çš„ SharedArrayBuffer\nå…·æœ‰è®¾ç½®ç¬¦å·+å­—ç¬¦ä¸²å±æ€§çš„ RegExp v æ ‡å¿—\nWebAssembly å°¾è°ƒç”¨\nV8 æ›´æ–°æ˜¯ MichaÃ«l Zasso åœ¨#47251ä¸­çš„è´¡çŒ®ã€‚")])]),s._v(" "),t("h2",{attrs:{id:"_3-ç¨³å®šçš„æµ‹è¯•è¿è¡Œå™¨"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-ç¨³å®šçš„æµ‹è¯•è¿è¡Œå™¨"}},[s._v("#")]),s._v(" 3.ç¨³å®šçš„æµ‹è¯•è¿è¡Œå™¨")]),s._v(" "),t("p",[s._v("Node.js ç‰ˆæœ¬ 20 çš„æœ€æ–°æ›´æ–°åŒ…æ‹¬å¯¹ "),t("code",[s._v("test_runner")]),s._v(" æ¨¡å—çš„é‡è¦æ›´æ”¹ã€‚æœ€è¿‘æ›´æ–°åï¼Œè¯¥æ¨¡å—å·²è¢«æ ‡è®°ä¸ºç¨³å®šã€‚ç¨³å®šçš„æµ‹è¯•è¿è¡Œç¨‹åºåŒ…æ‹¬ç”¨äºç¼–å†™å’Œè¿è¡Œæµ‹è¯•çš„æ„å»ºå—ï¼ŒåŒ…æ‹¬ï¼š")]),s._v(" "),t("ul",[t("li",[s._v("describe, it/testå’Œæ„å»ºæµ‹è¯•æ–‡ä»¶çš„é’©å­")]),s._v(" "),t("li",[s._v("mocking")]),s._v(" "),t("li",[s._v("watch mode è§‚å¯Ÿè€…æ¨¡å¼")]),s._v(" "),t("li",[t("code",[s._v("node --test")]),s._v("ç”¨äºå¹¶è¡Œè¿è¡Œå¤šä¸ªæµ‹è¯•æ–‡ä»¶\næµ‹è¯•è¿è¡Œç¨‹åºè¿˜åŒ…æ‹¬ä¸€äº›å°šæœªç¨³å®šçš„éƒ¨åˆ†ï¼ŒåŒ…æ‹¬æŠ¥å‘Šå™¨å’Œä»£ç è¦†ç›–ç‡ã€‚")])]),s._v(" "),t("p",[s._v("ä¸‹é¢æ˜¯å®˜æ–¹ç»™çš„ç¤ºä¾‹ï¼š")]),s._v(" "),t("div",{staticClass:"language-JavaScript line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" test"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" mock "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'node:test'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" assert "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'node:assert'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" fs "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'node:fs'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\nmock"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("method")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("fs"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'readFile'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("async")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Hello World"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("test")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'synchronous passing test'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("async")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("t")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// This test passes because it does not throw an exception.")]),s._v("\n  assert"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("strictEqual")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("await")]),s._v(" fs"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("readFile")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'a.txt'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Hello World"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("h2",{attrs:{id:"_4-æ€§èƒ½ä¼˜åŒ–"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-æ€§èƒ½ä¼˜åŒ–"}},[s._v("#")]),s._v(" 4.æ€§èƒ½ä¼˜åŒ–")]),s._v(" "),t("p",[s._v("æ–°æˆç«‹çš„ Node.js æ€§èƒ½å›¢é˜Ÿè‡ªä¸Šæ¬¡ä¸»è¦ç‰ˆæœ¬ä»¥æ¥é‡æ–°å…³æ³¨æ€§èƒ½ã€‚Node.js 20 å¯¹è¿è¡Œæ—¶çš„åŸºæœ¬éƒ¨åˆ†è¿›è¡Œäº†è®¸å¤šæ”¹è¿›ï¼ŒåŒ…æ‹¬ URLã€fetch()å’ŒEventTargetã€‚")]),s._v(" "),t("blockquote",[t("p",[s._v("ä¸çŸ¥é“æ˜¯ä¸æ˜¯bun.jsç»™çš„å‹åŠ›ğŸ˜‚")])]),s._v(" "),t("p",[s._v("åˆå§‹åŒ–çš„æˆæœ¬EventTargetå·²å‡å°‘ä¸€åŠï¼Œä»è€Œå¯ä»¥æ›´å¿«åœ°è®¿é—®æ‰€æœ‰ä½¿ç”¨å®ƒçš„å­ç³»ç»Ÿã€‚æ­¤å¤–ï¼ŒV8 Fast API è°ƒç”¨å·²è¢«ç”¨æ¥æé«˜ API çš„æ€§èƒ½ï¼Œä¾‹å¦‚URL.canParse()è®¡æ—¶å™¨ã€‚")]),s._v(" "),t("p",[s._v("Node.js 20 åŒ…æ‹¬ç‰¹å®šçš„æ›´æ”¹ï¼Œä¾‹å¦‚ Ada çš„æ›´æ–°ç‰ˆæœ¬ 2.0ï¼Œè¿™æ˜¯ä¸€ä¸ªç”¨ C++ ç¼–å†™çš„å¿«é€Ÿä¸”ç¬¦åˆè§„èŒƒçš„ URL è§£æå™¨ã€‚")]),s._v(" "),t("p",[s._v("æœŸå¾…ç€æé«˜æ€§èƒ½çš„æ–°æ–¹æ³•ï¼Œæˆ‘ä»¬ç›®å‰æ­£åœ¨åŠªåŠ›é€šè¿‡é‡æ„æ¥æ¶ˆé™¤å¯¹æµã€ã€å’Œå­—ç¬¦ä¸²è§£ç å™¨çš„å“ç‰ŒéªŒè¯æ£€æŸ¥ï¼Œä»è€Œé™ä½ç¬¦åˆè§„èŒƒçš„URLæˆæœ¬URLSearchParamsã€‚è¿™æœ‰åŠ©äºæ”¯æŒæˆ‘ä»¬åœ¨æœ‰æ„ä¹‰çš„æƒ…å†µä¸‹éµå®ˆè§„èŒƒçš„æ€»ä½“ç›®æ ‡ã€‚")]),s._v(" "),t("p",[s._v("å¦‚æœæ‚¨å¯¹æ€§èƒ½å’Œ Node.js å……æ»¡çƒ­æƒ…ï¼Œæˆ‘ä»¬æ­£åœ¨ç§¯æä¸ºæˆ‘ä»¬çš„æ€§èƒ½å›¢é˜Ÿå¯»æ‰¾è´¡çŒ®è€…ã€‚")]),s._v(" "),t("p",[s._v("ç°åœ¨å‡†å¤‡å•ä¸ªå¯æ‰§è¡Œåº”ç”¨ç¨‹åºéœ€è¦æ³¨å…¥ Blob\nå»å¹´ï¼Œè¯¥é¡¹ç›®ä¸€ç›´è‡´åŠ›äºæ”¯æŒå•ä¸€å¯æ‰§è¡Œåº”ç”¨ç¨‹åº (SEA)ï¼Œå¹¶äºæœ€è¿‘è·å¾—äº†åˆæ­¥æ”¯æŒã€‚ç”±äºè¯¥åŠŸèƒ½ä»å¤„äºå®éªŒé˜¶æ®µï¼Œå›¢é˜Ÿå°†ç»§ç»­å®Œå–„è¯¥æ–¹æ³•ã€‚åœ¨ Node.js 20 ä¸­ï¼Œæ„å»ºå•ä¸ªå¯æ‰§è¡Œåº”ç”¨ç¨‹åºç°åœ¨éœ€è¦ä» JSON é…ç½®æ³¨å…¥ç”± Node.js å‡†å¤‡çš„ blobï¼Œè€Œä¸æ˜¯æ³¨å…¥åŸå§‹ JS æ–‡ä»¶ã€‚")]),s._v(" "),t("p",[s._v("ä¾‹å­ï¼š")]),s._v(" "),t("div",{staticClass:"language-json line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[s._v("sea-config.json\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"main"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hello.js"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"output"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sea-prep.blob"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("p",[s._v("è¿™ä¼šå°† blob å†™å…¥æ–‡ä»¶"),t("code",[s._v("sea-prep.blob")]),s._v("ã€‚")]),s._v(" "),t("p",[t("code",[s._v("$ node --experimental-sea-config sea-config.json")]),s._v("\nç°åœ¨å¯ä»¥å°†è¯¥ blob æ³¨å…¥åˆ°äºŒè¿›åˆ¶æ–‡ä»¶ä¸­ã€‚")]),s._v(" "),t("p",[s._v("è¿›è¡Œæ­¤æ›´æ”¹æ˜¯ä¸ºäº†å…è®¸å°†å¤šä¸ªå…±å­˜èµ„æºåµŒå…¥åˆ° SEAï¼ˆå•ä¸€å¯æ‰§è¡Œåº”ç”¨ç¨‹åºï¼‰ä¸­ï¼Œä»è€Œå¼€è¾Ÿæ–°çš„ç”¨ä¾‹ã€‚")]),s._v(" "),t("h3",{attrs:{id:"ç½‘ç»œåŠ å¯†-api"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ç½‘ç»œåŠ å¯†-api"}},[s._v("#")]),s._v(" ç½‘ç»œåŠ å¯† API")]),s._v(" "),t("p",[s._v("è¯¥é¡¹ç›®è‡´åŠ›äºä¸å…¶ä»– JavaScript ç¯å¢ƒçš„äº’æ“ä½œæ€§ã€‚ä½œä¸º Node.js 20 ä¸­çš„ä¸€ä¸ªç¤ºä¾‹ï¼ŒWeb Crypto API å‡½æ•°çš„å‚æ•°ç°åœ¨æŒ‰ç…§å…¶ WebIDL å®šä¹‰è¿›è¡Œå¼ºåˆ¶å’ŒéªŒè¯ï¼Œå°±åƒå…¶ä»– Web Crypto API å®ç°ä¸€æ ·ã€‚è¿™è¿›ä¸€æ­¥æé«˜äº†ä¸ Web Crypto API çš„å…¶ä»–å®ç°çš„äº’æ“ä½œæ€§ã€‚")]),s._v(" "),t("h3",{attrs:{id:"å®˜æ–¹æ”¯æŒ-arm64-windows"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å®˜æ–¹æ”¯æŒ-arm64-windows"}},[s._v("#")]),s._v(" å®˜æ–¹æ”¯æŒ ARM64 Windows")]),s._v(" "),t("p",[s._v("Node.js æ‹¥æœ‰å¹¿æ³›çš„å¹³å°å’Œæ¶æ„æ”¯æŒï¼Œäººä»¬ä¼¼ä¹å¸Œæœ›å®ƒèƒ½å¤Ÿåœ¨ä»»ä½•åœ°æ–¹è¿è¡Œã€‚æˆ‘ä»¬å¾ˆé«˜å…´åœ°å‘Šè¯‰å¤§å®¶ï¼ŒNode.js ç°åœ¨åŒ…å«é€‚ç”¨äº ARM64 Windows çš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå…è®¸åœ¨è¯¥å¹³å°ä¸Šæœ¬æœºæ‰§è¡Œã€‚MSIã€zip/7z åŒ…å’Œå¯æ‰§è¡Œæ–‡ä»¶å¯ä» Node.js ä¸‹è½½ç«™ç‚¹ä»¥åŠæ‰€æœ‰å…¶ä»–å¹³å°è·å–ã€‚CI ç³»ç»Ÿå·²æ›´æ–°ï¼Œæ‰€æœ‰æ›´æ”¹ç°å·²åœ¨ ARM64 Windows ä¸Šè¿›è¡Œå…¨é¢æµ‹è¯•ï¼Œä»¥é˜²æ­¢å›å½’å¹¶ç¡®ä¿å…¼å®¹æ€§ã€‚")]),s._v(" "),t("h3",{attrs:{id:"web-assembly-ç³»ç»Ÿæ¥å£-wasi-çš„è¿›å±•"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#web-assembly-ç³»ç»Ÿæ¥å£-wasi-çš„è¿›å±•"}},[s._v("#")]),s._v(" Web Assembly ç³»ç»Ÿæ¥å£ (WASI) çš„è¿›å±•")]),s._v(" "),t("p",[s._v("è¯¥é¡¹ç›®ç»§ç»­è‡´åŠ›äº Node.js ä¸­çš„ WASI å®ç°ã€‚ä¸€äº›å€¼å¾—æ³¨æ„çš„è¿›å±•æ˜¯ï¼Œå°½ç®¡å®ƒæ˜¯å®éªŒæ€§çš„ï¼Œä½†å¯ç”¨ WASI ä¸å†éœ€è¦å‘½ä»¤è¡Œé€‰é¡¹ã€‚è¿™åº”è¯¥ä½¿å®ƒæ›´å®¹æ˜“é£Ÿç”¨ã€‚ç”±äºWASIå›¢é˜ŸæœŸå¾…ç€preview2åšå‡ºä¸€äº›æ”¹å˜æ¥è§„åˆ’æœªæ¥ã€‚è¿™åŒ…æ‹¬åœ¨è°ƒç”¨æ—¶æ·»åŠ ä¸€ä¸ªversion é€‰é¡¹ã€‚new WASI()åœ¨ 20.x ç‰ˆæœ¬ä¸­ï¼Œversionæ˜¯å¿…éœ€çš„å¹¶ä¸”æ²¡æœ‰é»˜è®¤å€¼ã€‚è¿™ä¸€ç‚¹å¾ˆé‡è¦ï¼Œå› ä¸ºæ”¯æŒæ–°ç‰ˆæœ¬çš„åº”ç”¨ç¨‹åºä¸ä¼šé»˜è®¤ä¸ºå¯èƒ½è¿‡æ—¶çš„ç‰ˆæœ¬ã€‚ç„¶è€Œï¼Œè¿™ç¡®å®æ„å‘³ç€ä»»ä½•ä¾èµ–äºç‰ˆæœ¬é»˜è®¤å€¼çš„ä»£ç éƒ½éœ€è¦æ›´æ–°ä»¥è¯·æ±‚ç‰¹å®šç‰ˆæœ¬ã€‚")])])}),[],!1,null,null,null);t.default=n.exports}}]);